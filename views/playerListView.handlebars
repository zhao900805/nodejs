<style>
    .form_settings{
        margin-left: 180px;
    }
    .submit_btn_settings{
        position: relative;
        margin-left: 110px;
    }
    .reset_btn_settings{
        position: relative;
        margin-left: 10px;
    }
    .readonly_input{
        width: 70px;
        margin: -6px;
    }
    .img_settings{
        position: relative;
        margin-top: 8px;
        width:70px;
        height: 70px;
    }
    .media_body_settings{
        position: relative;
        margin-left: 20px;
    }
    .edit_btn_settings{
        position: absolute;
        margin-top:70px;
        margin-left:-77px;
    }
    #back_btn{
        margin-left:-50px;
        margin-top: -57px;
    }
    .alert_i{
        display:none;
        margin-left: 50px;
        color: red;
    }
    .zoom_input_settings{
        position: relative;
        margin-left: 20px;
        color: #2E64FE;
        margin-left: 50px;
    }
</style>
<hr />
<div ng-app="myApp">
<div class="container">
    <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="card-block" style="margin-left: -60px;">
            <form action="/home/{{team_name}}/playerList" method="post">
                 <div class="form-group form-inline">
                    <label for="2-1" class=" col-lg-2 col-form-label col-form-label-md">age:</label>
                    <input id="2-1" type="number" class="form-control form-control-sm col-lg-9" name="player_age" ng-model="player_age">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        age can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_1">//player_age//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-2" class=" col-lg-2 col-form-label col-form-label-md">name:&nbsp</label>
                    <input id="2-2" type="text" class="form-control form-control-sm col-lg-9" name="player_name" ng-model="player_name">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        name can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_2">//player_name//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-3" class=" col-lg-2 col-form-label col-form-label-md">
                        weight:&nbsp&nbsp&nbsp</label>
                    <input id="2-3" type="number" class="form-control form-control-sm col-lg-9" name="player_weight" ng-model="player_weight">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        weight can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_3">//player_weight//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-4" class=" col-lg-2 col-form-label col-form-label-md">height:&nbsp&nbsp</label>
                    <input id="2-4" type="number" class="form-control form-control-sm col-lg-9" name="player_height" ng-model="player_height">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        height can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_4">//player_height//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-5" class=" col-lg-2 col-form-label col-form-label-md">
                        defence:&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                    <input id="2-5" type="number" class="form-control form-control-sm col-lg-9" name="player_defence" ng-model="player_defence">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        defence can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_5">//player_defence//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-6" class=" col-lg-2 col-form-label col-form-label-md">strike:&nbsp</label>
                    <input id="2-6" type="number" class="form-control form-control-sm col-lg-9" name="player_strike" ng-model="player_strike">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        strike can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_6">//player_strike//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-7" class=" col-lg-2 col-form-label col-form-label-md">
                        nationality:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                    <input id="2-7" type="text" class="form-control form-control-sm col-lg-9" name="player_nationality" ng-model="player_nationality">
                    <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                    <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        nationality can not be null!
                    </span>
                    <h1 class="zoom_input_settings" id="angular_blur_7">//player_nationality//</h1>
                </div>
                <div class="form-group form-inline">
                    <label for="2-8" class=" col-lg-2 col-form-label col-form-label-md">
                        photo_url:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                    <input id="2-8" type="text" class="form-control form-control-sm col-lg-9" name="player_photo_url" readonly>
                </div>
            <!--age:<input type="number" name="player_age">
            name:<input type="text" name="player_name">
            weight:<input type="number" name="player_weight">
            height:<input type="number" name="player_height">
            defence：<input type="number" name="player_defence">
            strike:<input type="number" name="player_strike">
            nationality:<input type="text" name="player_nationality">
            photo_url:<input type="text" name="player_photo_url">-
            <img src="/images/{{team.photo_url}}">-->
            <div class="input-group" style="width: 250px;">
                <span class="input-group-btn" style="margin-left: -50px;width: 230px;">
                    <button id="img_btn" class="btn btn-info btn-sm btn-file">
                        Browse <input type="file" id="imgInp">
                    </button>
                </span>
                <input type="text" class="form-control" readonly id="file_name_input">
                <input type="hidden" name="file_url_needToBeSent" id="file_url_needToBeSent">
            </div>
            <input type="hidden" name="player_team" value="{{team_name}}">
            <hr style="margin-left: -50px;width:305px"/>
            <div class="row">
                <button type="submit" value="submit" name="action" class="btn btn-sm btn-success submit_btn_settings">
                    <i class="fa fa-check" aria-hidden="true"></i>submit
                </button>
                <button type="button" class="btn btn-sm btn-info reset_btn_settings">
                    <i class="fa fa-refresh" aria-hidden="true"></i> reset
                </button>
            </div>
            <span>{{err_info}}</span>
            </form>  
            <button class="btn btn-danger btn-sm" id="back_btn"><i class="fa fa-chevron-left fa-lg" aria-hidden="true"></i> Back</button>
            </div>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-12">
            <form method="post" action="/home/{{team_name}}/playerList" class="form_settings">
                <input type="hidden" name="player_team" value="{{team_name}}">
                <button class="btn btn-sm" type="submit" value="by_age" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> by_age</button>
                <button class="btn btn-sm" type="submit" value="by_defence" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> by_defence</button>
                <button class="btn btn-sm" type="submit" value="by_strike" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> by_strike</button>
                <button class="btn btn-sm" type="submit" value="by_weight" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> by_weight</button>
                <button class="btn btn-sm" type="submit" value="by_height" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> by_height</button>
                <button class="btn btn-sm" type="submit" value="show_all" name="action">
                    <i class="fa fa-bars" aria-hidden="true"></i> show_all</button>
            </form>
            <br />
            {{#each player}}
            <div class="media">
                <img src="/images/{{this.photo_url}}" alt="" class="img_settings">
                <div class="media-body media_body_settings">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <td>age</td>
                                <td>name</td>
                                <td>weight</td>
                                <td>height</td>
                                <td>defence</td>
                                <td>strike</td>
                                <td>nationality</td>
                                <td>photo_url</td>
                                <td>team</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input class="readonly_input" type="text" value="{{this.age}}" ></td>
                                <td><input class="readonly_input" type="text" value="{{this.name}}" ></td>
                                <td><input class="readonly_input" type="number" value="{{this.weight}}" ></td>
                                <td><input class="readonly_input" type="number" value="{{this.height}}" ></td>
                                <td><input class="readonly_input" type="number" value="{{this.defence}}" ></td>
                                <td><input class="readonly_input" type="number" value="{{this.strike}}" ></td>
                                <td><input class="readonly_input" type="text" value="{{this.nationality}}" ></td>
                                <td><input class="readonly_input" type="text" value="{{this.photo_url}}" ></td>
                                <td><input class="readonly_input" type="text" value="{{this.team}}" ></td>
                                <td><input type="hidden" value="{{this.name}}"></td>
                                <a href="/home/{{this.name}}/editPage/{{this.team}}" value="edit" class=" btn edit_btn_settings">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                </a>    
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</div>
</div>
<!--<h1>player list:</h1>
<table>
    <tr>
        <th>photo:</th>
        <th>   </th>
        <th>age</th>
        <th>name:</th>
        <th>weight:</th>
        <th>height:</th>
        <th>defence</th>
        <th>strike</th>
        <th>nationality:</th>
        <th>photo_url:</th>
        <th>team:</th>
        <th></th>
    </tr>
    {{#each player}}
    <tr>
        <td><img src="/images/{{this.photo_url}}" alt=""></td>
        <td><input type="hidden" value="{{this.name}}"></td>
        <td><input class="readonly_input" type="text" value="{{this.age}}" ></td>
        <td><input class="readonly_input" type="text" value="{{this.name}}" ></td>
        <td><input class="readonly_input" type="number" value="{{this.weight}}" > </td>
        <td><input class="readonly_input" type="number" value="{{this.height}}" ></td>
        <td><input class="readonly_input" type="number" value="{{this.defence}}" ></td>
        <td><input class="readonly_input" type="number" value="{{this.strike}}" ></td>
        <td><input class="readonly_input" type="text" value="{{this.nationality}}" ></td>
        <td><input class="readonly_input" type="text" value="{{this.photo_url}}" ></td>
        <td><input class="readonly_input" type="number" value="{{this.team}}" ></td>
        <a href="/home/{{this.name}}/editPage/{{this.team}}" value="edit" class="Edit_action" class="eidtBtn">edit</a>
    </tr>
    {{/each}}
</table>-->
<script>
    $("#back_btn").click(function(){ 
        window.location.href="/home";
    });
    $(".reset_btn_settings").click(function(){
        $("#2-1").val("");
        $("#2-2").val("");
        $("#2-3").val("");
        $("#2-4").val("");
        $("#2-5").val("");
        $("#2-6").val("");
        $("#2-7").val("");
        $("#2-8").val("");
        $(".success_i").hide();
        $(".alert_i").hide();
    });
    $("#img_btn").click(function(){
        console.log("img_btn is clicked!");
        $("#img_div").show();
    });
    $("#img_btn").blur(function(){
        $("#img_div").hide();
    });


    $(document).ready( function() {
        $("#2-1").focus();
    	$(document).on('change', '.btn-file :file', function() {
		var input = $(this),
			label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.trigger('fileselect', [label]);
		});

		$('.btn-file :file').on('fileselect', function(event, label) {
		    
		    var input = $(this).parents('.input-group').find(':text'),
		        log = label;
		    
		    if( input.length ) {
		        input.val(log);
		    } else {
		        if( log ) alert(log);
		    }
	    
		});
		function readURL(input) {
		    if (input.files && input.files[0]) {
		        var reader = new FileReader();
                console.log("file_name_input  "+$("#file_name_input").val());
                    console.log("imgInp  "+$("#imgInp").val());
		        reader.onload = function (e) {
		            $('#img-upload').attr('src', e.target.result);
		        }
		    }
		}

		$("#imgInp").change(function(){
		    readURL(this);
            console.log("file_name_input  "+$("#file_name_input").val());//相对路径！
            var zcc = $("#imgInp").val();
            zcc = zcc.replace(/\\/g, '/').replace(/.*\//, '');

            var url_file = $("#file_name_input").val();
            // console.log(typeof(zcc));//string
            $("#file_url_needToBeSent").val(zcc);
            
            console.log("zcc is: "+zcc);
            console.log("now we have:"+$("#file_url_needToBeSent").val());
            console.log("imgInp  "+$("#imgInp").val());//绝对路径！
		}); 

        //validate input!
    $(".form-control-sm").blur(function(){
        if($(this).val() == ""){
            $(this).siblings("span.alert_i").show();
            //$("#11").show();
        }else{
            $(this).siblings("span.success_i").show();
        }
    });
    $(".form-control-sm").focus(function(){
        if($(this).val() != null){
            $(this).siblings("span.alert_i").hide();
        }
    });	
	});

    //angular script
    var myApp = angular.module('myApp', []);
    myApp.config(function($interpolateProvider) {
        $interpolateProvider.startSymbol('//');
        $interpolateProvider.endSymbol('//');
    });

    $("#2-1").blur(function(){
        $("#angular_blur_1").html("");
    });
    $("#2-2").blur(function(){
        $("#angular_blur_2").html("");
    });
    $("#2-3").blur(function(){
        $("#angular_blur_3").html("");
    });
    $("#2-4").blur(function(){
       $("#angular_blur_4").html(""); 
    });
    $("#2-5").blur(function(){
        $("#angular_blur_5").html("");
    });
    $("#2-6").blur(function(){
        $("#angular_blur_6").html("");
    });
    $("#2-7").blur(function(){
        $("#angular_blur_7").html("");
    });
</script>

