
<Style>
    .container{
        width: 700px;
    }
    .img_settings{
        height:300px;
        width:300px;
        margin-left:180px;
        margin-top:10px;
    }
    .alert_i{
        display:none;
        margin-left: 135px;
        color: red;
    }
    .zoom_input_settings{
        position: relative;
        margin-left: 20px;
        color: #2E64FE;
        margin-left: 105px;
    }
</style>
<div ng-app="myApp">
<div class="container">
    <div class="card">
        <img src="/images/{{team.photo_url}}" class="card-img-top img_settings">
        <div class="card-block">
            <form action="/home/{{team.name}}" method="post">
            <div class="form-group form-inline">
                <label for="1-1" class=" col-lg-2 col-form-label col-form-label-md">name:</label>
                <input id="1-1" type="text" value="{{team.name}}" class="form-control form-control-sm col-lg-9" name="modify_name" ng-model="modify_name">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        name can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_1">//modify_name//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-2" class=" col-lg-2 col-form-label col-form-label-md">age:</label>
                <input id="1-2" type="number" value="{{team.age}}" class="form-control form-control-sm col-lg-9" name="modify_age" ng-model="modify_age">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        age can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_2">//modify_age//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-3" class=" col-lg-2 col-form-label col-form-label-md">home:</label>
                <input id="1-3" type="text" value="{{team.home}}" class="form-control form-control-sm col-lg-9" name="modify_home" ng-model="modify_home">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        home can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_3">//modify_home//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-4" class=" col-lg-2 col-form-label col-form-label-md">strike:</label>
                <input id="1-4" type="number" value="{{team.strike}}" class="form-control form-control-sm col-lg-9" name="modify_strike" ng-model="modify_strike">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        strike can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_4">//modify_strike//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-5" class=" col-lg-2 col-form-label col-form-label-md">defence:</label>
                <input id="1-5" type="number" value="{{team.defence}}" class="form-control form-control-sm col-lg-9" name="modify_defence" ng-model="modify_defence">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        defence can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_5">//modify_defence//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-6" class=" col-lg-2 col-form-label col-form-label-md">nationality:</label>
                <input id="1-6" type="text" value="{{team.nationality}}" class="form-control form-control-sm col-lg-9" name="modify_nationality" ng-model="modify_nationality">
                <span class="success_i" style="display:none"><i class="fa fa-smile-o fa-lg" aria-hidden="true"></i></span>
                <span class="alert_i" id="11"><i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                        nationality can not be null!
                </span>
                <h1 class="zoom_input_settings" id="angular_blur_6">//modify_nationality//</h1>
            </div>
            <div class="form-group form-inline">
                <label for="1-6" class=" col-lg-2 col-form-label col-form-label-md">photo_url:</label>
                <input type="text" value="{{team.photo_url}}" name="modify_photo_url" readonly style="width: 50px;">
                <div class="input-group" style="width:400px;margin-left:20px;">
                    <span class="input-group-btn">
                        <button id="img_btn" class="btn btn-info btn-sm btn-file">
                            Browse <input type="file" id="imgInp">
                        </button>
                    </span>
                    <input type="text" class="form-control" readonly id="file_name_input">
                    <input type="hidden" name="file_url_needToBeSent" id="file_url_needToBeSent">
                </div>
            </div>
        <!--<div class="input-group">
            <span class="input-group-btn">
                <button id="img_btn" class="btn btn-info btn-sm btn-file">
                    Browse <input type="file" id="imgInp">
                </button>
            </span>
            <input type="text" class="form-control" readonly id="file_name_input">
            <input type="hidden" name="file_url_needToBeSent" id="file_url_needToBeSent">
        </div>-->
        <hr />
        <button type="submit" value="submit" class="btn btn-sm btn-success" name="action">
            <i class="fa fa-check" aria-hidden="true"></i> submit</button>
        <button type="button" value="cancel" id="cancel_btn" class="btn btn-sm btn-warning">
            <i class="fa fa-undo" aria-hidden="true"></i> cancel</button>
        <button type="submit" value="delete" name="action" class="btn btn-sm btn-danger">
            <i class="fa fa-trash" aria-hidden="true"></i> delete</button>
        <button type="button" class="btn btn-sm btn-info" id="reset_btn">
            <i class="fa fa-refresh" aria-hidden="true"></i> reset</button>
        </form>
        </div>
    </div>
</div>
</div>
<button class="btn btn-sm btn-danger" id="back_btn">
    <i class="fa fa-chevron-left fa-lg" aria-hidden="true"></i> Back
</button>

<script>

    $("#reset_btn").click(function(){
        $("#1-1").val("");
        $("#1-2").val("");
        $("#1-3").val("");
        $("#1-4").val("");
        $("#1-5").val("");
        $("#1-6").val("");
        $(".success_i").hide();
        $(".alert_i").hide();
    });

    $("#back_btn").click(function(){
        window.location.href = "/home";
    });

$("#cancel_btn").click(function(){
    console.log("the cancel btn has been clicked!");
    window.location.href="/home";
});


    $(document).ready( function() {
        $("#1-1").focus();
    	$(document).on('change', '.btn-file :file', function() {
		var input = $(this),
			label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.trigger('fileselect', [label]);
		});

		$('.btn-file :file').on('fileselect', function(event, label) {
		    
		    var input = $(this).parents('.input-group').find(':text'),
		        log = label;
		    
		    if( input.length ) {
		        input.val(log);
		    } else {
		        if( log ) alert(log);
		    }
	    
		});
		function readURL(input) {
		    if (input.files && input.files[0]) {
		        var reader = new FileReader();
                console.log("file_name_input  "+$("#file_name_input").val());
                    console.log("imgInp  "+$("#imgInp").val());
		        reader.onload = function (e) {
		            $('#img-upload').attr('src', e.target.result);
		        }
		    }
		}

		$("#imgInp").change(function(){
		    readURL(this);
            console.log("file_name_input  "+$("#file_name_input").val());//相对路径！
            var zcc = $("#imgInp").val();
            zcc = zcc.replace(/\\/g, '/').replace(/.*\//, '');

            var url_file = $("#file_name_input").val();
            // console.log(typeof(zcc));//string
            $("#file_url_needToBeSent").val(zcc);
            
            console.log("zcc is: "+zcc);
            console.log("now we have:"+$("#file_url_needToBeSent").val());
            console.log("imgInp  "+$("#imgInp").val());//绝对路径！
		}); 

        //validate input!
    $(".form-control-sm").blur(function(){
        if($(this).val() == ""){
            $(this).siblings("span.alert_i").show();
            //$("#11").show();
        }else{
            $(this).siblings("span.success_i").show();
        }
    });
    $(".form-control-sm").focus(function(){
        if($(this).val() != null){
            $(this).siblings("span.alert_i").hide();
        }
    })	
	});

    //angular script
    var myApp = angular.module('myApp', []);
    myApp.config(function($interpolateProvider) {
        $interpolateProvider.startSymbol('//');
        $interpolateProvider.endSymbol('//');
    });
    $("#1-1").blur(function(){
        $("#angular_blur_1").text("");
    });
    $("#1-2").blur(function(){
        $("#angular_blur_2").text("");
    });
    $("#1-3").blur(function(){
        $("#angular_blur_3").text("");
    });
    $("#1-4").blur(function(){
        $("#angular_blur_4").text("");
    });
    $("#1-5").blur(function(){
        $("#angular_blur_5").text("");
    });
    $("#1-6").blur(function(){
        $("#angular_blur_6").text("");
    });
</script>
